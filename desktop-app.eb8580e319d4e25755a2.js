webpackJsonp([2],{"./src/desktop/app.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/mobx/lib/mobx.module.js"),o=s("./node_modules/react/index.js"),i=s("./node_modules/react-dom/index.js");s("./src/shared/styles/core.less");const r=s("./src/desktop/views/Main.tsx");n.useStrict(!0),localStorage.setItem("debug","swift*");const a=document.getElementById("swift");a.classList.add("desktop"),i.render(o.createElement(r.default,null),a)},"./src/desktop/components/Sidebar.less":function(e,t){},"./src/desktop/components/Sidebar.tsx":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/mobx-react/index.module.js"),i=s("./node_modules/react/index.js"),r=s("./src/shared/components/Button.tsx"),a=s("./src/shared/context.ts");s("./src/desktop/components/Sidebar.less");let c=class extends i.Component{constructor(){super(...arguments),this.onSessionSelect=(e=>{this.props.selectSession(e.props.sessionId)})}render(){const e=this.context.store,t=this.props.sessionId;return i.createElement("div",{className:"Sidebar"},i.createElement("div",{className:"Sidebar__user"},i.createElement("div",{className:"Sidebar__label"},"Client name:"),i.createElement("div",{className:"Sidebar__user-name"},e.userName)),e.sessionList.length?i.createElement("div",{className:"Sidebar__sessions"},i.createElement("div",{className:"Sidebar__label"},"Sessions:"),i.createElement("div",{className:"Sidebar__session-list"},e.sessionList.map(s=>{const n=e.getSession(s);return i.createElement(r.default,{key:s,sessionId:s,onTap:this.onSessionSelect,className:"Sidebar__session"+(t===s?" Sidebar__session_active":"")},n.name)}))):null)}};c.contextTypes=a.contextTypes,c=n([o.observer],c),t.default=c},"./src/desktop/views/Main.less":function(e,t){},"./src/desktop/views/Main.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/mobx-react-devtools/index.js"),o=s("./node_modules/react/index.js");n.configureDevtool({logEnabled:!0});const i=s("./src/shared/context.ts"),r=s("./src/shared/Store.ts"),a=s("./src/shared/views/CreateSession.tsx"),c=s("./src/shared/views/JoinSession.tsx"),d=s("./src/shared/views/Sessions.tsx"),l=s("./src/shared/views/SessionViewer.tsx"),h=s("./src/desktop/views/tabs.tsx"),u=s("./src/desktop/components/Sidebar.tsx"),p=s("./src/shared/components/Tabs.tsx");s("./src/desktop/views/Main.less");const m={sessions:d.default,create:a.default,join:c.default};class f extends o.PureComponent{constructor(e,t){super(e,t),this.isNewSession=!1,this.selectTab=(e=>{this.setState({tabId:e,sessionId:null})}),this.navigateToSession=((e,t)=>{this.isNewSession=!!t,this.setState({tabId:"sessions",sessionId:e},()=>{this.isNewSession=!1})}),this.navigateToTab=(e=>{this.setState({tabId:e,sessionId:null})}),this.store=new r.default,this.state={tabId:"sessions",sessionId:null}}getChildContext(){return{store:this.store}}render(){const{tabId:e,sessionId:t}=this.state,s=m[e];return o.createElement("div",{className:"Main"},o.createElement("div",{className:"Main__header"},o.createElement("div",{className:"Main__title"},"Swift"),o.createElement(p.default,{tabs:h.TabsInfo,categoryIndex:0,currentTabId:e,onTabSelect:this.selectTab,hideIndicator:!!t})),o.createElement("div",{className:"Main__body"},o.createElement(u.default,{selectSession:this.navigateToSession,sessionId:t}),o.createElement("div",{className:"Main__tab-container"},t?o.createElement(l.default,{sessionId:t,openInfo:this.isNewSession}):o.createElement(s,{navigateToSession:this.navigateToSession,navigateToTab:this.navigateToTab,sessionId:t}))),!1)}}f.childContextTypes=i.contextTypes,t.default=f},"./src/desktop/views/tabs.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabMap={sessions:()=>"My sessions",create:()=>"Create Sessions",join:()=>"Join Sessions"};t.TabsInfo=[["sessions","create","join"].map(e=>({tabId:e,Label:t.TabMap[e]}))]},"./src/shared/GatewayClient.ts":function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(o,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new s(function(t){t(e.value)}).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/debug-logger/debug-logger.js"),i=s("./node_modules/events/events.js"),r=s("./node_modules/socket.io-client/lib/index.js"),a=o("swift:GatewayClient");t.default=class extends i.EventEmitter{constructor(){super(),this.isConnecting=!1,this.socket=r("https://swift-gateway.herokuapp.com",{transports:["websocket"],autoConnect:!1}),this.socket.on("data",(e,t)=>{a("received data",t),this.emit("data",e,t)}),this.socket.on("error",e=>a(e)),this.socket.on("disconnect",()=>{a("Disconnected from the gateway"),this.emit("disconnected")}),this.socket.on("join",(e,t)=>{this.emit("join",e,t)}),this.socket.on("sessionClient",(e,t)=>{this.emit("sessionClient",e,t)})}connect(){return this.isConnecting||this.socket.connected?Promise.resolve():(this.isConnecting=!0,new Promise((e,t)=>{this.socket.connect(),this.socket.once("connect",()=>{this.isConnecting=!1,a("Connected to the gateway"),this.socket.removeListener("connect_error"),this.socket.removeListener("connect_timeout"),e()}),this.socket.once("connect_error",t),this.socket.once("connect_timeout",t)}))}openSession(e){return n(this,void 0,void 0,function*(){this.socket.connected||(yield this.connect()),this.socket.emit("openSession",e)})}closeSession(e){return n(this,void 0,void 0,function*(){this.socket.connected||(yield this.connect()),this.socket.emit("closeSession",e),this.disconnect()})}joinSession(e){return n(this,void 0,void 0,function*(){this.socket.connected||(yield this.connect()),this.socket.emit("join",e)})}disconnect(){this.socket.connected&&(this.isConnecting=!1,this.socket.disconnect(),this.socket.removeListener("connect_error"),this.socket.removeListener("connect_timeout"))}send(e,t){return n(this,void 0,void 0,function*(){this.socket.connected||(yield this.connect()),a("sending",t,"to",e),this.socket.emit("data",e,t)})}}},"./src/shared/RTCClient.ts":function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))(function(o,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new s(function(t){t(e.value)}).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/debug-logger/debug-logger.js"),i=s("./node_modules/events/events.js"),r=o("swift:RTCClient");class a extends i.EventEmitter{on(e,t){return i.EventEmitter.prototype.on.call(this,e,t),this}emit(e,t){return i.EventEmitter.prototype.emit.call(this,e,t)}}t.default=class extends a{constructor(e,t){super(),this.sendChannel=null,this.sessionCreating=!1,this.sessionCreated=!1,this.onGatewayMessage=((e,t)=>n(this,void 0,void 0,function*(){if(e===this.remoteClientId)if("offer"===t.type){this.pc.setRemoteDescription(new RTCSessionDescription(t.sessionDescription));const e=yield this.pc.createAnswer();this.pc.setLocalDescription(e),this.gatewayClient.send(this.remoteClientId,{type:"answer",sessionDescription:e})}else if("answer"===t.type)this.pc.setRemoteDescription(t.sessionDescription);else if("candidate"===t.type){const e=new RTCIceCandidate({sdpMLineIndex:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate});this.pc.addIceCandidate(e)}})),this.onSendChannelOpen=(e=>{r("data channel opened"),this.setupDataChannel()}),this.onSendChannelClose=(e=>{r("onSendChannelClose",e)}),this.onSendChannelError=(e=>{r("onSendChannelError",e)}),this.onDataChannel=(e=>{r("data channel opened"),this.sendChannel=e.channel,this.setupDataChannel()}),this.onLocalIceCandidate=(e=>{e.candidate&&this.gatewayClient.send(this.remoteClientId,{type:"candidate",candidate:{sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid,candidate:e.candidate.candidate}})}),this.gatewayClient=t,this.gatewayClient.on("data",this.onGatewayMessage),this.remoteClientId=e,this.pc=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),this.pc.onicecandidate=this.onLocalIceCandidate,this.pc.ondatachannel=this.onDataChannel}initiateConnection(){return n(this,void 0,void 0,function*(){r("initiateConnection"),this.sendChannel=this.pc.createDataChannel("Swift Data Channel with "+this.remoteClientId),this.sendChannel.onopen=this.onSendChannelOpen,this.sendChannel.onclose=this.onSendChannelClose,this.sendChannel.onerror=this.onSendChannelError,r("create offer");const e=yield this.pc.createOffer();r("offer created"),yield this.pc.setLocalDescription(e),this.gatewayClient.send(this.remoteClientId,{type:"offer",sessionDescription:e})})}setupDataChannel(){this.sendChannel.onmessage=(e=>{const{type:t,data:s}=JSON.parse(e.data);this.emit(t,s)}),this.gatewayClient.removeListener("data",this.onGatewayMessage),this.emit("connect",this.sendChannel)}getDataChannel(){return this.sendChannel}sendMessage(e,t){this.sendChannel?this.sendChannel.send(JSON.stringify({type:e,data:t})):r("trying to send a message before the channel is opened")}}},"./src/shared/Store.ts":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/crdt/index.js"),i=s("./node_modules/debug-logger/debug-logger.js"),r=s("./node_modules/mobx/lib/mobx.module.js"),a=s("./node_modules/rtc-dcstream/index.js"),c=s("./node_modules/uuid/v4.js"),d=s("./src/shared/GatewayClient.ts"),l=s("./src/shared/actions/CreateDoc.ts"),h=s("./src/shared/actions/UpdateDoc.ts"),u=s("./src/shared/models/User.ts"),p=s("./src/shared/RTCClient.ts"),m=s("./node_modules/ua-parser-js/src/ua-parser.js"),f=i("swift:RTCClient");class _{constructor(){this.sessionList=[],this.docs={},this.RTCClients={},this.crdts={},this.updating={},this.pendingSeqActions=[],this.userIdPerSessionId={},this.onJoin=((e,t)=>{if(this.crdts[e]||this.createCRDT(e),this.RTCClients[t])return;const s=this.RTCClients[t]=new p.default(t,this.gatewayClient);this.setupClient(s),s.on("connect",t=>{const s=a(t);s.pipe(this.crdts[e].createStream()).pipe(s)})}),this.onSessionUser=((e,t)=>{if(this.crdts[e]||this.createCRDT(e),this.RTCClients[t])return;const s=this.RTCClients[t]=new p.default(t,this.gatewayClient);this.setupClient(s),s.initiateConnection(),s.on("connect",t=>{const s=a(t);s.pipe(this.crdts[e].createStream()).pipe(s)})}),window.store=this;const e=(new m).getResult();this.userName=e.os.name+" - "+e.browser.name,this.gatewayClient=new d.default,this.gatewayClient.on("join",this.onJoin),this.gatewayClient.on("sessionClient",this.onSessionUser)}applyPendingSeqAction(){this.pendingSeqActions.length&&(this.pendingSeqActions.forEach(e=>e()),this.pendingSeqActions=[])}getDoc(e){return this.docs[e]}addDoc(e){this.docs[e.id]=e}createCRDT(e){const t=this.crdts[e]=new o.Doc,s="user-"+c();this.userIdPerSessionId[e]=s,this.updating[s]=!0;const n=new u.default(this,t,s,this.userName);this.addDoc(n),delete this.updating[s],t.on("row_update",t=>{const s=t.get("id");this.updating[s]||(this.updating[s]=!0,this.docs[s]?this.executeAction(new h.default(s,this.docs[s].changes)):this.executeAction(new l.default(t.toJSON(),e)),delete this.updating[s])})}setupClient(e){}openSession(e){this.createCRDT(e),this.gatewayClient.openSession(e)}closeSession(e){this.gatewayClient.closeSession(e)}join(e){return this.createCRDT(e),this.gatewayClient.joinSession(e),new Promise(t=>{const s=r.observe(this.sessionList,()=>{this.sessionList.includes(e)&&(s(),t())})})}getSession(e){return this.docs[e]}removeSession(e){if(!this.docs[e])return f("trying to remove an inexisting session",e);delete this.docs[e]}getUser(e){return this.docs[e]}getItem(e){return this.docs[e]}executeAction(e,t=!1){return e.run(this),e}}n([r.observable],_.prototype,"sessionList",void 0),n([r.observable],_.prototype,"userName",void 0),t.default=_},"./src/shared/actions/Action.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/mobx/lib/mobx.module.js");t.default=class{constructor(e){this.type=e}run(e){this.store=e,n.action(this.type,()=>this.execute())()}}},"./src/shared/actions/CreateDoc.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./src/shared/models/docClass.ts"),o=s("./src/shared/models/Session.ts"),i=s("./src/shared/actions/Action.ts");t.default=class extends i.default{constructor(e,t){super("createDoc"),this.row=e,this.sessionId=t}execute(){const e=n.default[this.row.type].instantiate(this.store,this.store.crdts[this.sessionId],this.row);return this.store.addDoc(e),e instanceof o.default&&!this.store.sessionList.includes(this.row.id)&&this.store.sessionList.push(this.row.id),this.store.applyPendingSeqAction(),!0}}},"./src/shared/actions/CreateSession.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./src/shared/models/Session.ts"),o=s("./src/shared/actions/Action.ts");t.default=class extends o.default{constructor(e,t,s){super("createSession"),this.id=e,this.name=t,this.ownerId=s}execute(){this.store.crdts[this.id]||this.store.createCRDT(this.id),this.store.updating[this.id]=!0;const e=new n.default(this.store,this.store.crdts[this.id],this.id,this.name,this.ownerId);return delete this.store.updating[this.id],this.store.addDoc(e),this.store.sessionList.push(this.id),!0}}},"./src/shared/actions/UpdateDoc.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./src/shared/actions/Action.ts");t.default=class extends n.default{constructor(e,t){super("updateDoc"),this.docId=e,this.changes=t}execute(){const e=this.store.getDoc(this.docId);for(const t in this.changes)e[t]=this.changes[t];return this.store.applyPendingSeqAction(),!0}}},"./src/shared/actions/UpdateUserName.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./src/shared/actions/Action.ts");t.default=class extends n.default{constructor(e){super("updateUserName"),this.name=e}execute(){for(const e in this.store.userIdPerSessionId)this.store.getUser(e).name=this.name;return this.store.userName=this.name,!0}}},"./src/shared/components/Button.less":function(e,t){},"./src/shared/components/Button.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/react/index.js"),o=s("./src/shared/spur/ButtonPlugin.ts"),i=s("./src/shared/spur/Factory.tsx");s("./src/shared/components/Button.less");t.default=class extends n.PureComponent{constructor(e,t){super(e,t),this.div=null,this.onTap=(e=>{this.props.onTap(this,e)}),this.onDoubleTap=(e=>{this.props.onDoubleTap(this,e)}),this.onRef=(e=>{this.div=e,this.props.elementRef&&this.props.elementRef(e)});const s=new o.default;this.plugins={button:s},s.setEnable(!e.disabled),s.repeat=!!e.repeat,this.props.onTap&&s.on("tap",this.onTap),this.props.onDoubleTap&&s.on("doubleTap",this.onDoubleTap)}componentWillReceiveProps(e){const t=this.plugins.button;t.setEnable(!e.disabled),t.repeat=!!e.repeat,e.onTap&&!t.hasListener("tap")&&t.on("tap",this.onTap),e.onDoubleTap&&!t.hasListener("doubleTap")&&t.on("doubleTap",this.onDoubleTap)}render(){const{className:e,disabled:t,children:s,style:o}=this.props,r={className:"button"+(e?" "+e:"")+(t?" disabled":""),elementRef:this.onRef,plugins:this.plugins,style:o};return n.createElement(i.Pdiv,r,s)}}},"./src/shared/components/SelectableText.less":function(e,t){},"./src/shared/components/SelectableText.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/react/index.js"),o=s("./src/shared/spur/interactionLock.ts");s("./src/shared/components/SelectableText.less");t.default=class extends n.Component{constructor(){super(...arguments),this.onMouseDown=(()=>{this.lock=o.default.requestLockOn(this.div),this.lock&&window.addEventListener("mouseup",this.onMouseUp)}),this.onMouseUp=(()=>{o.default.releaseLock(this.lock)})}componentWillUnmount(){window.removeEventListener("mouseup",this.onMouseUp)}render(){const{text:e,className:t}=this.props;return n.createElement("div",{className:"SelectableText"+(t?" "+t:""),onMouseDown:this.onMouseDown,ref:e=>this.div=e},e)}}},"./src/shared/components/SessionDisplay.less":function(e,t){},"./src/shared/components/SessionDisplay.tsx":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/mobx-react/index.module.js"),i=s("./node_modules/react/index.js"),r=s("./node_modules/uuid/v4.js"),a=s("./src/shared/actions/CreateDoc.ts"),c=s("./src/shared/components/Button.tsx"),d=s("./src/shared/context.ts");s("./src/shared/components/SessionDisplay.less");let l=class extends i.Component{constructor(){super(...arguments),this.isScrolledAtBottom=!0,this.addText=(()=>{const e=this.input.value,t=this.props.sessionId;if(""===e||!t)return;const s="item-"+r();this.context.store.executeAction(new a.default({id:s,type:"item",creatorId:this.context.store.userIdPerSessionId[t],creationDate:(new Date).toISOString(),itemContent:{type:"text",content:e}},t)),this.input.value=""}),this.validateAddText=(e=>{e.preventDefault(),this.addText()}),this.onScroll=(()=>{const{scrollHeight:e,scrollTop:t,clientHeight:s}=this.scrollDiv;this.isScrolledAtBottom=Math.abs(s+t-e)<10})}componentDidUpdate(){this.isScrolledAtBottom&&this.scrollDiv.scrollTo(0,this.scrollDiv.scrollHeight)}render(){const e=this.context.store,{sessionId:t}=this.props,s=[],n=e.getSession(t).itemIds;let o="",r=[];for(let a=0;a<n.length;a+=1){const c=n[a],d=e.getItem(c);d.creatorId!==o&&(o=d.creatorId,r=[],s.push(i.createElement("div",{key:a,className:"SessionDisplay__client-block"+(o===e.userIdPerSessionId[t]?" SessionDisplay__client-block_you":"")},i.createElement("div",{className:"SessionDisplay__item-creator"},e.getUser(d.creatorId).name),i.createElement("div",{className:"SessionDisplay__items"},r)))),r.push(i.createElement("div",{className:"SessionDisplay__item",key:a},d.itemContent.content))}return i.createElement("div",{className:"SessionDisplay"},i.createElement("div",{className:"SessionDisplay__item-list",onScroll:this.onScroll,ref:e=>this.scrollDiv=e},s),i.createElement("form",{className:"SessionDisplay__input-area",onSubmit:this.validateAddText},i.createElement("input",{className:"SessionDisplay__text-input",ref:e=>this.input=e}),i.createElement(c.default,{onTap:this.addText,className:"SessionDisplay__add action-button"},"Add")))}};l.contextTypes=d.contextTypes,l=n([o.observer],l),t.default=l},"./src/shared/components/SessionInfo.less":function(e,t){},"./src/shared/components/SessionInfo.tsx":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/mobx-react/index.module.js"),i=s("./node_modules/qrcode.react/lib/index.js"),r=s("./node_modules/react/index.js"),a=s("./src/shared/context.ts");s("./src/shared/components/SessionInfo.less");let c=class extends r.Component{render(){const e=this.context.store,t=e.getSession(this.props.sessionId);return r.createElement("div",{className:"SessionInfo"},r.createElement("div",{className:"SessionInfo__details"},r.createElement("div",{className:"SessionInfo__box"},r.createElement("div",{className:"SessionInfo__label"},"Name:"),r.createElement("div",{className:"SessionInfo__name"},t.name)),r.createElement("div",{className:"SessionInfo__box"},r.createElement("div",{className:"SessionInfo__label"},"Created by:"),r.createElement("div",{className:"SessionInfo__creator"},e.getUser(t.ownerId).name)),r.createElement("div",{className:"SessionInfo__box"},r.createElement("div",{className:"SessionInfo__label"},"Id:"),r.createElement("div",{className:"SessionInfo__creator"},t.id))),r.createElement("div",{className:"SessionInfo__QR"},r.createElement(i,{value:t.id,size:256})))}};c.contextTypes=a.contextTypes,c=n([o.observer],c),t.default=c},"./src/shared/components/SessionItem.less":function(e,t){},"./src/shared/components/SessionItem.tsx":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/mobx-react/index.module.js"),i=s("./node_modules/react/index.js"),r=s("./src/shared/components/Button.tsx"),a=s("./src/shared/components/SelectableText.tsx"),c=s("./src/shared/context.ts");s("./src/shared/components/SessionItem.less");let d=class extends i.Component{constructor(){super(...arguments),this.enterSession=(()=>{this.props.onEnterSession(this.props.sessionId)})}render(){const{sessionId:e}=this.props,t=this.context.store,s=t.getSession(e),n=s.itemIds.length;return i.createElement(r.default,{className:"SessionItem",onTap:this.enterSession},i.createElement("div",{className:"SessionItem__session-info"},i.createElement("div",{className:"SessionItem__session-name"},s.name),i.createElement("div",{className:"SessionItem__item-count"},`${n} item${n>1?"s":""}`)),i.createElement("div",{className:"SessionItem__client-list"},i.createElement("div",{className:"SessionItem__client-list-label"},"Connected clients:"),s.userIds.map(s=>{const n=s===t.userIdPerSessionId[e];return i.createElement("div",{className:"SessionItem__client"+(n?" SessionItem__client_you":""),key:s},t.getUser(s).name,n?" (you)":null)})),i.createElement("div",{className:"SessionItem__id-box"},i.createElement("div",{className:"SessionItem__id-label"},"Id:"),i.createElement(a.default,{className:"SessionItem__id",text:e})))}};d.contextTypes=c.contextTypes,d=n([o.observer],d),t.default=d},"./src/shared/components/SessionScanner.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/debug-logger/debug-logger.js"),o=s("./node_modules/instascan/index.js"),i=s("./node_modules/react/index.js"),r=n("swift:SessionScanner");t.default=class extends i.PureComponent{constructor(){super(...arguments),this.videoElt=null,this.scan=(()=>o.Camera.getCameras().then(e=>{if(!(e.length>0))throw r("No cameras found."),new Error("No cameras found.");this.scanner.start(e[1]||e[0])})),this.stop=(()=>{this.scanner.stop()})}componentDidMount(){this.scanner=new o.Scanner({video:this.videoElt,mirror:!1}),this.scanner.addListener("scan",e=>{this.scanner.stop(),this.props.onSessionScanned(e)})}render(){return i.createElement("video",{ref:e=>this.videoElt=e,className:"session-scanner"})}}},"./src/shared/components/Tabs.less":function(e,t){},"./src/shared/components/Tabs.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/react/index.js"),o=s("./src/shared/components/Button.tsx");s("./src/shared/components/Tabs.less");const i=o.default,r=100;class a extends n.PureComponent{constructor(){super(...arguments),this.indicator=null,this.tabsRef={},this.tabWidth={},this.labelUpdated=!0,this.positionIndicator=(()=>{if(this.labelUpdated){this.labelUpdated=!1;for(const e in this.tabsRef){const t=this.tabsRef[e];t&&(this.tabWidth[e]=t.div.clientWidth)}}const{currentTabId:e,tabs:t,categoryIndex:s}=this.props;let n=0,o=!1,i=0;for(const{tabId:r}of t[s]){r===e&&(o=!0);const t=this.tabWidth[r];o||(i+=t),n+=t}i-=n/2,this.indicator.style.transform=`translate3d(${i+r/2}px, 0, 0) scaleX(${this.tabWidth[e]/r})`}),this.selectTab=(e=>{this.props.onTabSelect(e.props.tabId)}),this.onLabelUpdate=(()=>{this.labelUpdated=!0})}componentDidMount(){this.positionIndicator()}componentDidUpdate(){this.positionIndicator()}render(){const{currentTabId:e,tabs:t,categoryIndex:s,hideIndicator:o}=this.props;return n.createElement("div",{className:"Tabs"},n.createElement("div",{className:"Tabs__container",style:{transform:`translate3d(0, ${-100*s}%,0)`}},t.map((t,s)=>n.createElement("div",{className:"Tabs__category",key:s},n.createElement("div",{className:"Tabs__category_container",key:s},t.map(({tabId:t,Label:s})=>n.createElement(i,{key:t,className:"Tabs__tab"+(e===t?" Tabs__tab_active":""),onTap:this.selectTab,tabId:t,ref:e=>this.tabsRef[t]=e},n.createElement(s,{onUpdate:this.onLabelUpdate}))))))),n.createElement("div",{className:"Tabs__indicator"+(o?" Tabs__indicator_hidden":""),ref:e=>this.indicator=e}))}}a.defaultProps={hideIndicator:!1},t.default=a},"./src/shared/components/TextField.less":function(e,t){},"./src/shared/components/TextField.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/react/index.js");s("./src/shared/components/TextField.less");t.default=class extends n.PureComponent{constructor(e,t){super(e,t),this.mainDiv=null,this.input=null,this.content="",this.onChange=(()=>{this.content=this.input.value}),this.onMainRef=(e=>{this.mainDiv=e}),this.onBlur=(()=>{this.mainDiv.className=this.generateClassName()}),this.onInputRef=(e=>{this.input=e}),this.state={hasContent:!1}}generateClassName(){return"TextField"+(this.content.length?" TextField_hasContent":"")}getValue(){return this.content}setValue(e){this.content=e,this.input.value=e}blur(){this.input.blur()}render(){const{label:e,placeholder:t}=this.props;return n.createElement("div",{className:this.generateClassName(),ref:this.onMainRef},n.createElement("div",{className:"TextField__label"},e),n.createElement("input",{className:"TextField__input",placeholder:t,onChange:this.onChange,onBlur:this.onBlur,ref:this.onInputRef}))}}},"./src/shared/context.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/prop-types/index.js");t.contextTypes={store:n.object}},"./src/shared/models/Doc.ts":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/mobx/lib/mobx.module.js");function i(e,t){const s=new o.Atom(t),n=function(){return s.reportObserved(),this.__data[t]},i=function(e){this.__data[t]!==e&&(this.__data[t]=e,this.row&&this.row.get(t)!==e&&this.row.set(t,e),s.reportChanged())};delete e[t]&&Object.defineProperty(e,t,{get:n,set:i})}t.linked=i;class r{constructor(e,t,s){this.__data={},this.store=e,this.id=t,this.type=s,this.changes={}}initCRDT(e){this.row=e.get(this.id),this.row.get("type")||this.row.set(this.toModel()),this.row.on("change",e=>{Object.assign(this.changes,e)})}createDoc(e){return Object.assign(e,{id:this.id,type:this.type})}}n([i],r.prototype,"id",void 0),n([i],r.prototype,"type",void 0),t.default=r},"./src/shared/models/Item.ts":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./src/shared/models/Doc.ts");class i extends o.default{constructor(e,t,s,n,o,i){super(e,s,"item"),this.creatorId=n,this.creationDate=o,this.itemContent=i,this.initCRDT(t)}static instantiate(e,t,{id:s,creatorId:n,creationDate:o,itemContent:r}){return new i(e,t,s,n,o,r)}toModel(){return this.createDoc({creationDate:this.creationDate,creatorId:this.creatorId,itemContent:this.itemContent})}}n([o.linked],i.prototype,"creatorId",void 0),n([o.linked],i.prototype,"creationDate",void 0),n([o.linked],i.prototype,"itemContent",void 0),t.default=i},"./src/shared/models/Session.ts":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/mobx/lib/mobx.module.js"),i=s("./src/shared/models/Doc.ts"),r=s("./src/shared/models/createSeq.ts");class a extends i.default{constructor(e,t,s,n,o){super(e,s,"session"),this.name=n,this.ownerId=o,this.userIds=[],this.itemIds=[],this.initCRDT(t),r.default(t,e,"type","item",this.itemIds,e=>e.get("id")),r.default(t,e,"type","user",this.userIds,e=>e.get("id"))}static instantiate(e,t,{id:s,name:n,ownerId:o}){return new a(e,t,s,n,o)}toModel(){return this.createDoc({ownerId:this.ownerId,name:this.name})}}n([i.linked],a.prototype,"ownerId",void 0),n([i.linked],a.prototype,"name",void 0),n([o.observable],a.prototype,"userIds",void 0),n([o.observable],a.prototype,"itemIds",void 0),t.default=a},"./src/shared/models/User.ts":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./src/shared/models/Doc.ts");class i extends o.default{constructor(e,t,s,n){super(e,s,"user"),this.name=n,this.initCRDT(t)}static instantiate(e,t,{id:s,name:n}){return new i(e,t,s,n)}toModel(){return this.createDoc({name:this.name})}}n([o.linked],i.prototype,"name",void 0),t.default=i},"./src/shared/models/createSeq.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s,n,o,i){const r=e.createSeq(s,n);return r.forEach(e=>o.push(i(e))),r.on("add",e=>{const s=r.indexOf(e);if(-1!==s){const n=i(e);t.pendingSeqActions.push(()=>{o.splice(s,0,n)})}}),r.on("remove",e=>{const s=i(e),n=o.indexOf(s);-1!==n&&t.pendingSeqActions.push(()=>{o.splice(n,1)})}),o}},"./src/shared/models/docClass.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./src/shared/models/Item.ts"),o=s("./src/shared/models/Session.ts"),i=s("./src/shared/models/User.ts"),r={session:o.default,user:i.default,item:n.default};t.default=r},"./src/shared/spur/ButtonPlugin.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/spur-events/index.js"),o=s("./src/shared/spur/interactionLock.ts"),i=s("./src/shared/spur/Plugin.ts");function r(e){t.current.plugins.length&&(t.current.plugins.forEach(s=>{t.current.longTapFired&&e===s.DOMNode||s.cancel()}),t.current.plugins=[])}t.current={plugins:[],tapFired:!1,doubleTapFired:!1,longTapFired:!1},n.addListener(window,"pointerup",function(e){t.current.plugins=[]}),o.default.on("element-lock",r),o.default.on("container-lock",r);const a=700,c=300,d=15;t.default=class extends i.default{constructor(e={}){super(),this.enable=!0,this.lockId=null,this.lastTap=0,this.currentTap=null,this.pointerId="",this.cancelled=!1,this.longTapTimeout=0,this.boundingBox={left:0,top:0,width:0,height:0},this.DOMNode=null,this.minBoxWidth=d,this.minBoxHeight=d,this.isPressed=!1,this.repeatTimeout=0,this.repeatCount=0,this.repeat=!1,this.repeat=!!e.repeat}setMinBoxDimensions(e,t){this.minBoxWidth=Math.max(e,d),this.minBoxHeight=Math.max(t,d)}press(e){this.isPressed=!0,this.repeat&&(this.repeatCount=0,this.repeatTap()),this.emit("press",e)}release(e){this.isPressed=!1,this.emit("release",e)}tap(e){this.emit("tap",e)}doubleTap(e){this.emit("doubleTap",e)}longTap(e){this.emit("longTap",e)}setEnable(e){this.enable=e}reset(){this.lockId&&(o.default.releaseLock(this.lockId),this.lockId=null),window.clearTimeout(this.repeatTimeout),window.clearTimeout(this.longTapTimeout),n.removeListener(document,"pointermove",this.onPointerMove,{context:this}),n.removeListener(document,"pointerup",this.onPointerUp,{context:this})}repeatTap(){const e=0===this.repeatCount?300:20;this.repeatTimeout=window.setTimeout(()=>{this.repeatCount+=1,this.tap(this.currentTap),this.repeatTap()},e)}cancel(){this.isPressed&&(this.cancelled=!0,this.release(!0)),this.reset()}onPointerMove(e){e.pointerId===this.pointerId&&(e.clientX<this.boundingBox.left||e.clientX>this.boundingBox.left+this.boundingBox.width||e.clientY<this.boundingBox.top||e.clientY>this.boundingBox.top+this.boundingBox.height)&&this.cancel()}onPointerDown(e){if(!this.enable||3===e.originalEvent.which||o.default.isLocked(e.target))return;t.current.plugins.push(this),this.pointerId=e.pointerId,this.cancelled=!1;const s={x:e.clientX,y:e.clientY},i=e.target,r=this.DOMNode.getBoundingClientRect();this.boundingBox.top=r.top,this.boundingBox.left=r.left,r.width<this.minBoxWidth?(this.boundingBox.width=this.minBoxWidth,this.boundingBox.left-=(this.minBoxWidth-r.width)/2):this.boundingBox.width=r.width,r.height<this.minBoxHeight?(this.boundingBox.height=this.minBoxHeight,this.boundingBox.top-=(this.minBoxHeight-r.height)/2):this.boundingBox.height=r.height,this.repeat&&(this.currentTap=new n.SpurEvent(e.type),this.currentTap=Object.assign(this.currentTap,e)),this.press(s),t.current.tapFired=t.current.doubleTapFired=t.current.longTapFired=!1,this.hasListener("longTap")&&!this.repeat&&(window.clearTimeout(this.longTapTimeout),this.longTapTimeout=window.setTimeout(()=>{this.lockId=o.default.requestLockOn(i),this.lockId&&(this.longTap(s),t.current.longTapFired=!0)},a)),n.addListener(document,"pointermove",this.onPointerMove,{context:this}),n.addListener(document,"pointerup",this.onPointerUp,{context:this})}onPointerUp(e){if(e.pointerId===this.pointerId&&!this.cancelled&&(this.reset(),this.release(!1),!t.current.longTapFired)){const s=Date.now(),n=s-this.lastTap;if(this.lastTap=s,!t.current.tapFired&&this.hasListener("tap")&&(t.current.tapFired=!0,this.tap(e)),n<c)return this.lastTap=0,void(!t.current.doubleTapFired&&this.hasListener("doubleTap")&&(t.current.doubleTapFired=!0,e.preventDefault(),this.doubleTap(e)))}}componentDidMount(e){this.DOMNode=e,n.addListener(this.DOMNode,"pointerdown",this.onPointerDown,{context:this})}componentWillUnmount(){n.removeListener(this.DOMNode,"pointerdown",this.onPointerDown,{context:this}),this.reset(),this.DOMNode=null,window.clearTimeout(this.repeatTimeout)}}},"./src/shared/spur/Factory.tsx":function(e,t,s){"use strict";var n=this&&this.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(s[n[o]]=e[n[o]])}return s};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/react/index.js");class i extends o.PureComponent{constructor(e,t){super(e,t);for(const t in e.plugins){e.plugins[t].setComponentInstance(this)}}componentWillMount(){const e=this.props.plugins;for(const t in e){e[t].componentWillMount()}}componentDidMountWithElement(e){const t=this.props.plugins;for(const s in t){t[s].componentDidMount(e)}}componentWillReceiveProps(e){const t=this.props.plugins;for(const s in t){t[s].componentWillReceiveProps(e)}}componentWillUpdate(e){const t=this.props.plugins;for(const s in t){t[s].componentWillUpdate(e)}}componentDidUpdate(){const e=this.props.plugins;for(const t in e){e[t].componentDidUpdate()}}componentWillUnmount(){const e=this.props.plugins;for(const t in e){const s=e[t];s.componentWillUnmount(),s.removeEventListeners()}}}function r(e){return class extends i{constructor(e,t){super(e,t),this.element=null,this.onRef=this.onRef.bind(this)}componentDidMount(){this.componentDidMountWithElement(this.element)}onRef(e){this.element=e,this.props.elementRef&&this.props.elementRef(e)}render(){const t=e,s=this.props,{children:i,plugins:r,elementRef:a}=s,c=n(s,["children","plugins","elementRef"]);return o.createElement(t,Object.assign({},c,{ref:this.onRef}),i)}}}t.PlugComponent=i,t.createPlugTagComponent=r,t.Pdiv=r("div"),t.Pspan=r("span")},"./src/shared/spur/Plugin.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.listeners={}}setComponentInstance(e){}componentDidMount(e){}componentWillMount(){}componentWillReceiveProps(e){}componentWillUpdate(e){}componentDidUpdate(){}componentWillUnmount(){}on(e,t,s=this){e in this.listeners?this.listeners[e].push({callback:t,context:s}):this.listeners[e]=[{callback:t,context:s}]}removeEventListeners(){this.listeners={}}emit(e,t){const s=this.listeners[e];if(s)for(let e=0,n=s.length;e<n;e+=1){const n=s[e];n.callback.call(n.context,t)}}hasListener(e){return!!this.listeners[e]}}},"./src/shared/spur/interactionLock.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/events/events.js");t.default=new class extends n.EventEmitter{constructor(){super(...arguments),this.lockNodes={},this.lockContainerNodes={},this.lockId=0}isLocked(e){for(const t in this.lockNodes){let s=this.lockNodes[t];for(;null!==s;){if(s===e)return!0;s=s.parentNode}}for(const t in this.lockContainerNodes){const s=this.lockContainerNodes[t];let n=e;for(;null!==n;){if(n===s)return!0;n=n.parentNode}}return!1}requestLockOn(e){return this.isLocked(e)?null:(this.lockId+=1,this.lockNodes[this.lockId]=e,this.emit("element-lock",e),this.lockId)}requestContainerLockOn(e){return this.isLocked(e)?null:(this.lockId+=1,this.lockContainerNodes[this.lockId]=e,this.emit("container-lock",e),this.lockId)}releaseLock(e){const t=this.lockNodes[e]||this.lockContainerNodes[e];t&&(delete this.lockNodes[e],delete this.lockContainerNodes[e],this.lockId-=1,this.emit("unlock",t))}}},"./src/shared/styles/core.less":function(e,t){},"./src/shared/views/CreateSession.less":function(e,t){},"./src/shared/views/CreateSession.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/react/index.js"),o=s("./node_modules/uuid/v4.js"),i=s("./src/shared/actions/CreateSession.ts"),r=s("./src/shared/components/Button.tsx"),a=s("./src/shared/components/TextField.tsx"),c=s("./src/shared/context.ts");s("./src/shared/views/CreateSession.less");class d extends n.PureComponent{constructor(){super(...arguments),this.createSession=(()=>{const e=this.sessionNameField.getValue();if(""===e)return;const t=this.context.store,s="session-"+o();t.openSession(s),t.executeAction(new i.default(s,e,t.userIdPerSessionId[s])),this.props.navigateToSession(s,!0)}),this.validate=(e=>{e.preventDefault(),this.createSession()})}render(){return n.createElement("div",{className:"CreateSession"},n.createElement("div",{className:"view__explanation"},"Create a session to allow another device to connect."),n.createElement("form",{className:"view__box",onSubmit:this.validate},n.createElement("div",{className:"view__column"},n.createElement(a.default,{label:"choose a name for your session",placeholder:"My session",ref:e=>this.sessionNameField=e})),n.createElement("div",{className:"view__column CreateSession__create-column"},n.createElement(r.default,{className:"action-button  CreateSession__Create",onTap:this.createSession},"Create"))))}}d.contextTypes=c.contextTypes,t.default=d},"./src/shared/views/JoinSession.less":function(e,t){},"./src/shared/views/JoinSession.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/react/index.js"),o=s("./src/shared/components/Button.tsx"),i=s("./src/shared/components/SessionScanner.tsx"),r=s("./src/shared/context.ts");s("./src/shared/views/JoinSession.less");class a extends n.PureComponent{constructor(e,t){super(e,t),this.scanner=null,this.input=null,this.onSessionScanned=(e=>{this.setState({isScanning:!1}),this.join(e)}),this.stopScanning=(()=>{this.setState({isScanning:!1},()=>this.scanner.stop())}),this.startScanning=(()=>{try{this.scanner.scan(),this.setState({isScanning:!0})}catch(e){}}),this.validateSession=(()=>{const e=this.input.value;e&&this.join(e)}),this.formValidate=(e=>{e.preventDefault(),this.validateSession()}),this.state={isScanning:!1}}join(e){this.context.store.join(e).then(()=>{this.props.navigateToSession(e)})}render(){const{isScanning:e}=this.state;return n.createElement("div",{className:"JoinSession"+(e?" JoinSession_scanning":"")},n.createElement("div",{className:"view__explanation"},"Join an existing session by scanning its QR code or entering its ID."),n.createElement("div",{className:"view__box"},n.createElement("div",{className:"view__header"},"Scan a QR Code"),n.createElement(o.default,{onTap:this.startScanning,className:"action-button"},"Start Scanning"),n.createElement("div",{className:"JoinSession__scanner"},n.createElement(i.default,{onSessionScanned:this.onSessionScanned,ref:e=>this.scanner=e}),n.createElement(o.default,{onTap:this.stopScanning,className:"action-button JoinSession__StopScanning"},"Stop Scanning"))),n.createElement("form",{className:"view__box",onSubmit:this.formValidate},n.createElement("div",{className:"view__header"},"Enter a session ID"),n.createElement("input",{className:"JoinSession__id-input",ref:e=>this.input=e}),n.createElement(o.default,{onTap:this.validateSession,className:"action-button"},"Join")))}}a.contextTypes=r.contextTypes,t.default=a},"./src/shared/views/SessionViewer.less":function(e,t){},"./src/shared/views/SessionViewer.tsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("./node_modules/react/index.js"),o=s("./src/shared/components/Button.tsx"),i=s("./src/shared/components/SessionDisplay.tsx"),r=s("./src/shared/components/SessionInfo.tsx");s("./src/shared/views/SessionViewer.less");t.default=class extends n.Component{constructor(e,t){super(e,t),this.toggleInfo=(()=>{this.setState({infoOpen:!this.state.infoOpen})}),this.state={infoOpen:e.openInfo}}componentWillReceiveProps(e){e.openInfo&&!this.state.infoOpen&&this.setState({infoOpen:!0})}render(){const e=this.props.sessionId,t=this.state.infoOpen;return n.createElement("div",{className:"SessionViewer"},n.createElement("div",{className:"SessionViewer__header"},n.createElement(o.default,{onTap:this.toggleInfo,className:"SessionViewer__info"},"Info"),n.createElement(o.default,{onTap:this.props.goBack,className:"SessionViewer__go-back"},"Go back"),n.createElement("div",{className:"SessionViewer__slider-container"+(t?"":" SessionViewer__slider-container_close")},n.createElement("div",{className:"SessionViewer__slider"},n.createElement(r.default,{sessionId:e})))),n.createElement(i.default,{sessionId:e}))}}},"./src/shared/views/Sessions.less":function(e,t){},"./src/shared/views/Sessions.tsx":function(e,t,s){"use strict";var n=this&&this.__decorate||function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s("./node_modules/mobx-react/index.module.js"),i=s("./node_modules/react/index.js"),r=s("./src/shared/actions/UpdateUserName.ts"),a=s("./src/shared/components/Button.tsx"),c=s("./src/shared/components/SessionItem.tsx"),d=s("./src/shared/components/TextField.tsx"),l=s("./src/shared/context.ts");s("./src/shared/views/Sessions.less");let h=class extends i.Component{constructor(){super(...arguments),this.onEnterSession=(e=>{this.props.navigateToSession(e)}),this.updateUserName=(()=>{const e=this.clientNameField.getValue();if(""===e)return;this.clientNameField.setValue(""),this.clientNameField.blur();const t=this.context.store;e!==t.userName&&t.executeAction(new r.default(e))}),this.userNameValidate=(e=>{e.preventDefault(),this.updateUserName()}),this.create=(()=>{this.props.navigateToTab("create")}),this.join=(()=>{this.props.navigateToTab("join")})}render(){const e=this.context.store.sessionList;return i.createElement("div",{className:"Sessions"},0===e.length?i.createElement(i.Fragment,null,i.createElement("div",{className:"view__explanation"},"To start, setup your name."),i.createElement("form",{className:"view__box",onSubmit:this.userNameValidate},i.createElement("div",{className:"view__column"},i.createElement(d.default,{label:"choose a name to identify this client",placeholder:this.context.store.userName,ref:e=>this.clientNameField=e})),i.createElement("div",{className:"view__column"},i.createElement(a.default,{className:"action-button",onTap:this.updateUserName},"Set"))),i.createElement("div",{className:"view__explanation"},"Create or Join a session."),i.createElement("div",{className:"view__box"},i.createElement("div",{className:"view__column"},i.createElement(a.default,{onTap:this.create,className:"action-button"},"Create")),i.createElement("div",{className:"view__column"},i.createElement(a.default,{onTap:this.join,className:"action-button"},"Join")))):null,e.map(e=>i.createElement(c.default,{sessionId:e,key:e,onEnterSession:this.onEnterSession})))}};h.contextTypes=l.contextTypes,h=n([o.observer],h),t.default=h},0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){}},["./src/desktop/app.tsx"]);
//# sourceMappingURL=desktop-app.eb8580e319d4e25755a2.js.map